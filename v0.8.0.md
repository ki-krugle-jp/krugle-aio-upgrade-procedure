
## Stop krugle and shasta services

```bash
systemctl stop krugle.service
systemctl stop shasta.service
```


## Backup local project folders and files

```bash
mkdir -p /data/backup
cp -r /opt/krugle/scmi/data /data/backup/
```

## Verify backup contents

```bash
ls -lR /data/backup/data

```

## Download AIO Image

Define username(dluser) and password(dlpass) for download site.

```bash
dluser="<username>"
dlpass="<password>"
```

Download image from https://downloads.krugle.org/ to /root/ directory.

```bash
wget --user=${dluser}  --password=${dlpass} https://downloads.krugle.org/Krugle-AiO-installer-enterprise-0.8.0-20260108T051336.tgz
wget --user=${dluser}  --password=${dlpass} https://downloads.krugle.org/Krugle-AiO-installer-enterprise-0.8.0-20260108T051336.tgz.md5sum.txt
```

## Check md5 checksum
```bash
md5sum -c Krugle-AiO-installer-enterprise-0.8.0-20260108T051336.tgz.md5sum.txt

### sample
root@demo1-aio:~# md5sum -c Krugle-AiO-installer-enterprise-0.8.0-20260108T051336.tgz.md5sum.txt
Krugle-AiO-installer-enterprise-0.8.0-20260108T051336.tgz: OK
root@demo1-aio:~#

```

## Delete old installer 

```bash

cd /root
rm -rf krugle-aio-installer

```

## Extract AIO installer tarball
```bash
tar xvzf Krugle-AiO-installer-enterprise-0.8.0-20260108T051336.tgz
```


#### Copy certificate and key to SSL directory

```bash
cp -v /root/server.crt /root/krugle-aio-installer/krugle/kng/kse/ssl/server.crt
cp -v /root/server.key /root/krugle-aio-installer/krugle/kng/kse/ssl/server.key
```

## Executes AIO Installer

```bash
cd /root/krugle-aio-installer
./install.sh

```
## Restore Data from Backup

```bash
cp -r /data/backup/data /opt/krugle/scmi/ 
```